<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSS_Frameworks-Bootstrap</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/styles/style.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light shadow-lg" style="background-color: #1C66A6;">
    <div class="container-fluid rounded">
        <a class="navbar-brand" href="#">Nihal Food City</a>
        <button aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarNavAltMarkup" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a aria-current="page" class="nav-link active" id="home_page" style="cursor: pointer">Home</a>
                <a class="nav-link" id="customer_page" style="cursor: pointer">Customer</a>
                <a class="nav-link" id="item_page" style="cursor: pointer">Items</a>
                <a class="nav-link" id="place_order_page" style="cursor: pointer">Orders</a>
            </div>
        </div>
    </div>
</nav>
<main id="home">
    <section class="firstSection">
        <div class="image">
            <h1 class="name">Nihal Food City</h1>
        </div>
    </section>
</main>

<!--Customer Section-->
<section class="secondSection" id="customer" style="display: none">
    <h1 class="sectionName">Customer</h1>
    <div class="container-fluid">
        <div class="row d-flex flex-row justify-content-around">
            <div class="col-10 col-md-5 col-lg-5 ">
                <label class="form-label" for="customerDataLists">Customer ID</label>
                <input class="form-control" id="customerDataLists"
                       placeholder="Type to search...">
                <!--<datalist id="datalistOptions">
                    <option value="C001">
                    <option value="C002">
                    <option value="C003">
                    <option value="C004">
                    <option value="C005">
                </datalist>-->
            </div>
            <div class="col-10 col-md-5 col-lg-5 ">
                <button class="btn btn-primary" data-bs-target="#addNewCustomer" data-bs-toggle="modal" type="button">
                    Add New Customer
                </button>
                <button class="btn btn-primary" data-bs-target="#updateCustomer" data-bs-toggle="modal" type="button">
                    Update Customer
                </button>
                <button class="btn btn-primary" data-bs-target="#deleteCustomer" data-bs-toggle="modal" type="button">
                    Delete Customer
                </button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="addNewCustomerLabel" class="modal fade" id="addNewCustomer" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addNewCustomerLabel">Add New Customer</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtCustomerId">Customer ID</label>
                            <input class="form-control" id="txtCustomerId" required type="text">
                            <p><small class="text-danger pl-1" id="lblcustId"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtCustomerName">Customer Name</label>
                            <input class="form-control" id="txtCustomerName" required type="text">
                            <p><small class="text-danger pl-1" id="lblcustName"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtCustomerAge">Age</label>
                            <input class="form-control" id="txtCustomerAge" required type="text">
                            <p><small class="text-danger pl-1" id="lblcustAge"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtAddress">Address</label>
                            <input class="form-control" id="txtAddress" required type="text">
                            <p><small class="text-danger pl-1" id="lblcustAddress"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtSalary">Salary(Rs.)</label>
                            <input class="form-control" id="txtSalary" required type="text">
                            <p><small class="text-danger pl-1" id="lblcustSalary"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnSaveCustomer" type="button">Save Customer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="updateCustomerLabel" class="modal fade" id="updateCustomer" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateCustomerLabel">Update Customer</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label" for="txtUCustId">Customer ID</label>
                            <input class="form-control" id="txtUCustId" required type="text">
                            <p><small class="text-danger pl-1" id="lblUCustId"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUCustName">Customer Name</label>
                            <input class="form-control" id="txtUCustName" required type="text">
                            <p><small class="text-danger pl-1" id="lblUCustName"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUCustAge">Age</label>
                            <input class="form-control" id="txtUCustAge" required type="text">
                            <p><small class="text-danger pl-1" id="lblUCustAge"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUCustAddress">Address</label>
                            <input class="form-control" id="txtUCustAddress" required type="text">
                            <p><small class="text-danger pl-1" id="lblUCustAddress"></small></p>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="txtUCustSalary">Salary(Rs.)</label>
                            <input class="form-control" id="txtUCustSalary" required type="text">
                            <p><small class="text-danger pl-1" id="lblUCustSalary"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnUpdateCustomer" type="button">Update Customer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="deleteCustomerLabel" class="modal fade" id="deleteCustomer" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteCustomerLabel">Add New Customer</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label" for="txtDCustId">Customer ID</label>
                            <input class="form-control is-valid" id="txtDCustId" required type="text">
                            <p><small class="text-danger pl-1" id="lblDCustId"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDCustName">Customer Name</label>
                            <input class="form-control is-valid" id="txtDCustName" required type="text">
                            <p><small class="text-danger pl-1" id="lblDCustName"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDCustAge">Age</label>
                            <input class="form-control is-valid" id="txtDCustAge" required type="text">
                            <p><small class="text-danger pl-1" id="lblDCustAge"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDCustAddress">Address</label>
                            <input class="form-control is-valid" id="txtDCustAddress" required type="text">
                            <p><small class="text-danger pl-1" id="lblDCustAddress"></small></p>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="txtDCustSalary">Salary(Rs.)</label>
                            <input class="form-control is-valid" id="txtDCustSalary" required type="text">
                            <p><small class="text-danger pl-1" id="lblDCustSalary"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnDeleteCustomer" type="button">Delete Customer</button>
                </div>
            </div>
        </div>
    </div>

    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">Customer Id</th>
            <th scope="col">Name</th>
            <th scope="col">Age</th>
            <th scope="col">Address</th>
            <th scope="col">Salary</th>
        </tr>
        </thead>
        <tbody id="customerTable">
        </tbody>
    </table>
</section>

<!--Item Section-->
<section class="thirdSection" id="item" style="display: none">
    <h1 class="sectionName">Item</h1>
    <div class="container-fluid">
        <div class="row d-flex flex-row justify-content-around">
            <div class="col-10 col-md-5 col-lg-5 ">
                <label class="form-label" for="customerDataLists">Customer ID</label>
                <input class="form-control" id="itemDataLists" placeholder="Type to search...">
            </div>
            <div class="col-10 col-md-5 col-lg-5 ">
                <button class="btn btn-primary" data-bs-target="#addNewItem" data-bs-toggle="modal" type="button">
                    Add New Item
                </button>
                <button class="btn btn-primary" data-bs-target="#updateItem" data-bs-toggle="modal" type="button">
                    Update Item
                </button>
                <button class="btn btn-primary" data-bs-target="#deleteItem" data-bs-toggle="modal" type="button">
                    Delete Item
                </button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="addNewItemLabel" class="modal fade" id="addNewItem" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addNewItemLabel">Add New Item</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtItemId">Item ID</label>
                            <input class="form-control" id="txtItemId" required type="text" type="text">
                            <p><small class="text-danger pl-1" id="lblItemId"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtItemName">Item Name</label>
                            <input class="form-control" id="txtItemName" required type="text" type="text">
                            <p><small class="text-danger pl-1" id="lblItemName"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtQty">Qty</label>
                            <input class="form-control" id="txtQty" required type="text" type="text">
                            <p><small class="text-danger pl-1" id="lblItemQty"></small></p>
                        </div>
                        <div class="col-md-6 col-lg-6 col-12">
                            <label class="form-label" for="txtUnitPrice">Unit Price(Rs.)</label>
                            <input class="form-control" id="txtUnitPrice" required type="text" type="text">
                            <p><small class="text-danger pl-1" id="lblItemUnitPrice"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnSaveItem" type="button">Save Item</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Button trigger modal -->

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="updateItemLabel" class="modal fade" id="updateItem" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateItemLabel">Update Item</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label" for="txtUItemId">Item ID</label>
                            <input class="form-control" id="txtUItemId" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblUItemId"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUItemName">Item Name</label>
                            <input class="form-control" id="txtUItemName" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblUItemName"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUItemQty">Qty</label>
                            <input class="form-control" id="txtUItemQty" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblUItemQty"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtUItemUnitPrice">Unit Price(Rs.)</label>
                            <input class="form-control" id="txtUItemUnitPrice" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblUItemUnitPrice"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnUpdateItem" type="button">Update Item</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Button trigger modal -->

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="deleteItemLabel" class="modal fade" id="deleteItem" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteItemLabel">Delete Item</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label" for="txtDItemId">Item ID</label>
                            <input class="form-control" id="txtDItemId" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblDItemId"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDItemName">Item Name</label>
                            <input class="form-control" id="txtDItemName" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblDItemName"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDItemQty">Qty</label>
                            <input class="form-control" id="txtDItemQty" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblDItemQty"></small></p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="txtDItemUnitPrice">Unit Price(Rs.)</label>
                            <input class="form-control" id="txtDItemUnitPrice" required type="text" value="">
                            <p><small class="text-danger pl-1" id="lblDItemUnitPrice"></small></p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" id="btnDeleteItem" type="button">Delete Item</button>
                </div>
            </div>
        </div>
    </div>

    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">Item ID</th>
            <th scope="col">Item Name</th>
            <th scope="col">Qty</th>
            <th scope="col">Unit Price(Rs.)</th>
        </tr>
        </thead>
        <tbody id="itemTable">
        </tbody>
    </table>
</section>

<!--Place Order Section-->
<section class="fourthSection" id="place_order" style="display: none">
    <h1 class="sectionName">Place Order</h1>
    <form class="row g-3">
        <div class="col-md-2">
            <label class="form-label" for="validationDefault04">Customer ID</label>
            <select class="form-select" id="validationDefault01" required>
                <option disabled selected value="">Choose...</option>
                <option>...</option>
            </select>
        </div>
        <div class="col-md-4">
            <label class="form-label" for="validationDefault02">Name</label>
            <input class="form-control" id="validationDefault02" required type="text" value="Otto">
        </div>
        <div class="col-md-4">
            <label class="form-label" for="validationDefault02">Address</label>
            <input class="form-control" id="validationDefault03" required type="text" value="Otto">
        </div>
        <div class="col-md-2">
            <label class="form-label" for="validationDefault02">Contact</label>
            <input class="form-control" id="validationDefault06" required type="text" value="Otto">
        </div>
        <div class="col-md-3">
            <label class="form-label" for="validationDefault04">Item ID</label>
            <select class="form-select" id="validationDefault07" required>
                <option disabled selected value="">Choose...</option>
                <option>...</option>
            </select>
        </div>
        <div class="col-md-3">
            <label class="form-label" for="validationDefault03">Name</label>
            <input class="form-control" id="validationDefault04" required type="text">
        </div>
        <div class="col-md-3 col-12 col-lg-6">
            <label class="form-label" for="validationDefault03">Qty</label>
            <input class="form-control" id="validationDefault08" required type="text">
        </div>
        <div class="col-md-3">
            <label class="form-label" for="validationDefault05">Price(Rs.)</label>
            <input class="form-control" id="validationDefault05" required type="text">
        </div>
        <div class="col-12">
            <button class="btn btn-primary" type="submit">Place Order</button>
        </div>
    </form>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">Customer ID</th>
            <th scope="col">Name</th>
            <th scope="col">Address</th>
            <th scope="col">Contact</th>
            <th scope="col">Item ID</th>
            <th scope="col">Item Name</th>
            <th scope="col">Qty</th>
            <th scope="col">Total</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th scope="row">C001</th>
            <td>Kamal</td>
            <td>Galle</td>
            <td>077-3783823</td>
            <td>I001</td>
            <td>Sudu Samba</td>
            <td>5</td>
            <td>3000</td>
        </tr>
        <tr>
            <th scope="row">C002</th>
            <td>Nimal</td>
            <td>Galle</td>
            <td>077-5683823</td>
            <td>I002</td>
            <td>Nadu</td>
            <td>5</td>
            <td>5000</td>
        </tr>
        </tbody>
    </table>
</section>

<script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.bundle.js"></script>
<script src="db/db.js"></script>

<script src="model/CustomerDTO.js"></script>
<script src="model/ItemDTO.js"></script>
<script>
    $("#home_page").click(function () {
        $("#home").css('display', 'block');
        $("#customer").css('display', 'none');
        $("#item").css('display', 'none');
        $("#place_order").css('display', 'none');
    });
    $("#customer_page").click(function () {
        $("#home").css('display', 'none');
        $("#customer").css('display', 'block');
        $("#item").css('display', 'none');
        $("#place_order").css('display', 'none');
    });
    $("#item_page").click(function () {
        $("#home").css('display', 'none');
        $("#customer").css('display', 'none');
        $("#item").css('display', 'block');
        $("#place_order").css('display', 'none');
    });
    $("#place_order_page").click(function () {
        $("#home").css('display', 'none');
        $("#customer").css('display', 'none');
        $("#item").css('display', 'none');
        $("#place_order").css('display', 'block');
    });

    /*Customer validation-----------------------------*/
    /*Save Customer validation-----------------------------*/
    $("#btnSaveCustomer").prop('disabled', true);
    const custId = /^(C00-)[0-9]{3}$/;
    const custName = /^[A-z ]{5,20}$/;
    const custAge = /^[0-9]{1,2}$/;
    const custAddress = /^[0-9/A-z. ,]{3,}$/;
    const custSalary = /^[0-9]{1,}[.][0-9]{2}$/;

    $('#txtCustomerId,#txtCustomerName,#txtCustomerAge,#txtAddress,#txtSalary').on('keydown', function (eventOb) {
        if (eventOb.key == "Tab") {
            eventOb.preventDefault();
        }
    });

    $('#txtCustomerId,#txtCustomerName,#txtCustomerAge,#txtAddress,#txtSalary').on('blur', function () {
        formValid();
    });

    $("#txtCustomerId").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtCustomerName").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtCustomerAge").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtAddress").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtSalary").on('keyup', function (e) {
        setButton();
        if (e.key == "Enter") {
            checkIfValid();
        }
    });

    function formValid() {
        var cusId = $("#txtCustomerId").val();
        $("#txtCustomerId").css('border', '2px solid green');
        $("#lblcustId").text("");
        if (custId.test(cusId)) {
            var cusName = $("#txtCustomerName").val();
            if (custName.test(cusName)) {
                $("#txtCustomerName").css('border', '2px solid green');
                $("#lblcustName").text("");
                var cusAge = $("#txtCustomerAge").val();
                if (custAge.test(cusAge)) {
                    $("#txtCustomerAge").css('border', '2px solid green');
                    $("#lblcustAge").text("");
                    var cusAddress = $("#txtAddress").val();
                    if (custAddress.test(cusAddress)) {
                        $("#txtAddress").css('border', '2px solid green');
                        $("#lblcustAddress").text("");
                        var cusSalary = $("#txtSalary").val();
                        if (custSalary.test(cusSalary)) {
                            $("#txtSalary").css('border', '2px solid green');
                            $("#lblcustSalary").text("");
                            return true;
                        } else {
                            $("#txtSalary").css('border', '2px solid red');
                            $("#lblcustSalary").text("Cus Salary is a required field : Pattern 100.00 or 100");
                            return false;
                        }
                    } else {
                        $("#txtAddress").css('border', '2px solid red');
                        $("#lblcustAddress").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                } else {
                    $("#txtCustomerAge").css('border', '2px solid red');
                    $("#lblcustAge").text("Cus Salary is a required field : Pattern 100.00 or 100");
                    return false;
                }
            } else {
                $("#txtCustomerName").css('border', '2px solid red');
                $("#lblcustName").text("Cus Salary is a required field : Pattern 100.00 or 100");
                return false;
            }
        } else {
            $("#txtCustomerId").css('border', '2px solid red');
            $("#lblcustId").text("Cus Salary is a required field : Pattern 100.00 or 100");
        }

    }

    function checkIfValid() {
        var cusId = $("#txtCustomerId").val();
        if (custId.test(cusId)) {
            $("#txtCustomerName").focus();
            var cusName = $("#txtCustomerName").val();
            if (custName.test(cusName)) {
                $("#txtCustomerAge").focus();
                var cusAge = $("#txtCustomerAge").val();
                if (custAge.test(cusAge)) {
                    $("#txtAddress").focus();
                    var cusAddress = $("#txtAddress").val();
                    if (custAddress.test(cusAddress)) {
                        $("#txtSalary").focus();
                        var cusSalary = $("#txtSalary").val();
                        if (custSalary.test(cusSalary)) {
                            let res = confirm("Do you really need to add this Customer..?");
                            if (res) {
                                saveCustomer();
                                clearAllSaveCustomerFields();
                            }
                        } else {
                            $("#txtSalary").focus();
                        }
                    } else {
                        $("#txtAddress").focus();
                    }
                } else {
                    $("#txtCustomerAge").focus();
                }
            } else {
                $("#txtCustomerName").focus();
            }
        } else {
            $("#txtCustomerId").focus();
        }
    }

    function setButton() {
        let bt = formValid();
        console.log(bt);
        if (bt) {
            $("#btnSaveCustomer").prop('disabled', false);
        } else {
            $("#btnSaveCustomer").prop('disabled', true);
        }
    }

    $('#btnSaveCustomer').click(function () {
        checkIfValid();
    });

    function saveCustomer() {

        let customerID = $("#txtCustomerId").val();
        let customerName = $("#txtCustomerName").val();
        let customerAge = $("#txtCustomerAge").val();
        let customerAddress = $("#txtAddress").val();
        let customerSalary = $("#txtSalary").val();

        var customerDTO = new CustomerDTO(customerID, customerName, customerAge, customerAddress, customerSalary);
        console.log(customerDTO.getID(), customerDTO.getName(), customerDTO.getAge(), customerDTO.getAddress(), customerDTO.getSalary());
        customerDB.push(customerDTO);
        loadAllCustomers();
        clearAllSaveCustomerFields();

        $("#customerTable>tr").on('dblclick', function () {
            var custId = $(this).children(":eq(0)").text();
            for (var i = 0; i < customerDB.length; i++) {
                if (customerDB[i].getID() == custId) {
                    let res = confirm("Do you want to delete this customer?");
                    if(res){
                        customerDB.splice(i, 1);
                    }
                }
            }
            loadAllCustomers();
        });
    }

    function loadAllCustomers() {
        $("#customerTable").empty();
        for (var i=0; i<customerDB.length; i++) {
            let row = `<tr><td>${customerDB[i].getID()}</td><td>${customerDB[i].getName()}</td><td>${customerDB[i].getAge()}</td><td>${customerDB[i].getAddress()}</td><td>${customerDB[i].getSalary()}</td></tr>`;
            $("#customerTable").append(row);
        }
    }

    function clearAllSaveCustomerFields() {
        $("#txtCustomerId").val("");
        $("#txtCustomerName").val("");
        $("#txtCustomerAge").val("");
        $("#txtAddress").val("");
        $("#txtSalary").val("");

        $("#btnSaveCustomer").prop('disabled', true);
    }

    /*Update Customer validation-----------------------------*/
    $("#txtUCustId,#txtUCustName,#txtUCustAge,#txtUCustAddress,#txtUCustSalary").on('keydown', function (e) {
        if (e.key == "Tab") {
            e.preventDefault();
        }
    });

    $("#txtUCustId").on('keyup', function (e) {
        let searchId = $("#txtUCustId").val();
        if (custId.test(searchId)) {
            $("#txtUCustId").css('border', '2px solid green');
            $("#lblUCustId").text("");
            if (e.key == "Enter") {
                let customer = searchCustomer(searchId);
                if (customer) {
                    $("#txtUCustName").val(customer.getName());
                    $("#txtUCustAge").val(customer.getAge());
                    $("#txtUCustAddress").val(customer.getAddress());
                    $("#txtUCustSalary").val(customer.getSalary());
                    $("#btnUpdateCustomer").prop('disabled', false);

                    $("#txtUCustName").css('border', '2px solid green');
                    $("#txtUCustAge").css('border', '2px solid green');
                    $("#txtUCustAddress").css('border', '2px solid green');
                    $("#txtUCustSalary").css('border', '2px solid green');
                    $("#txtUCustName").focus();
                } else {
                    $("#txtUCustName").val("");
                    $("#txtUCustAge").val("");
                    $("#txtUCustAddress").val("");
                    $("#txtUCustSalary").val("");
                    $("#btnUpdateCustomer").prop('disabled', true);
                    $("#txtUCustName").css('border', '1px solid #ced4da');
                    $("#txtUCustAge").css('border', '1px solid #ced4da');
                    $("#txtUCustAddress").css('border', '1px solid #ced4da');
                    $("#txtUCustSalary").css('border', '1px solid #ced4da');
                    alert("Customer Not found");
                }
            }
        } else {
            $("#txtUCustId").css('border', '2px solid red');
            $("#lblUCustId").text("Customer ID is a required field.Pattern : C00-0001");
            $("#btnUpdateCustomer").prop('disabled', true);
        }
    });

    function searchCustomer(customerId) {
        for (var i = 0; i < customerDB.length; i++) {
            if(customerDB[i].getID()==customerId){
                return customerDB[i];
            }
        }
    }

    $("#txtUCustName").keyup(function (event) {
        var uCustName = $("#txtUCustName").val();
        if (custName.test(uCustName)) {
            $("#txtUCustName").css('border', '2px solid green');
            $("#lblUCustName").text("");
            if (event.key == "Enter") {
                $("#txtUCustAge").focus();
            }
            var uCustId = $("#txtUCustId").val();
            var uCustAge = $("#txtUCustAge").val();
            var uCustAddress = $("#txtUCustAddress").val();
            var uCustSalary = $("#txtUCustSalary").val();

            if (custId.test(uCustId) && custName.test(uCustName) && custAge.test(uCustAge) && custAddress.test(uCustAddress) && custSalary.test(uCustSalary)) {
                $("#btnUpdateCustomer").prop('disabled', false);
            }

        } else {
            $("#btnUpdateCustomer").prop('disabled', true);
            $("#txtUCustName").css('border', '2px solid red');
            $("#lblUCustName").text("Customer name is a required field.");
        }
    });

    $("#txtUCustAge").keyup(function (event) {
        var uCustAge = $("#txtUCustAge").val();
        if (custAge.test(uCustAge)) {
            $("#txtUCustAge").css('border', '2px solid green');
            $("#lblUCustAge").text("");
            if (event.key == "Enter") {
                $("#txtUCustAddress").focus();
            }
            var uCustId = $("#txtUCustId").val();
            var uCustName = $("#txtUCustName").val();
            var uCustAddress = $("#txtUCustAddress").val();
            var uCustSalary = $("#txtUCustSalary").val();

            if (custId.test(uCustId) && custName.test(uCustName) && custAge.test(uCustAge) && custAddress.test(uCustAddress) && custSalary.test(uCustSalary)) {
                $("#btnUpdateCustomer").prop('disabled', false);
            }

        } else {
            $("#btnUpdateCustomer").prop('disabled', true);
            $("#txtUCustAge").css('border', '2px solid red');
            $("#lblUCustAge").text("Customer age is a required field.");
        }
    });

    $("#txtUCustAddress").keyup(function (event) {
        var uCustAddress = $("#txtUCustAddress").val();
        if (custAddress.test(uCustAddress)) {
            $("#txtUCustAddress").css('border', '2px solid green');
            $("#lblUCustAddress").text("");
            if (event.key == "Enter") {
                $("#txtUCustSalary").focus();
            }
            var uCustId = $("#txtUCustId").val();
            var uCustName = $("#txtUCustName").val();
            var uCustAge = $("#txtUCustAge").val();
            var uCustSalary = $("#txtUCustSalary").val();

            if (custId.test(uCustId) && custName.test(uCustName) && custAge.test(uCustAge) && custAddress.test(uCustAddress) && custSalary.test(uCustSalary)) {
                $("#btnUpdateCustomer").prop('disabled', false);
            }

        } else {
            $("#btnUpdateCustomer").prop('disabled', true);
            $("#txtUCustAddress").css('border', '2px solid red');
            $("#lblUCustAddress").text("Customer address is a required field.");
        }
    });

    $("#txtUCustSalary").keyup(function (event) {
        var uCustSalary = $("#txtUCustSalary").val();
        if (custSalary.test(uCustSalary)) {
            $("#txtUCustSalary").css('border', '2px solid green');
            $("#lblUCustSalary").text("");
            if (event.key == "Enter") {
                let res = confirm("Do you want to update this customer?");
                if (res) {
                    updateCustomer();
                    loadAllCustomers();
                }
            }
            var uCustId = $("#txtUCustId").val();
            var uCustName = $("#txtUCustName").val();
            var uCustAge = $("#txtUCustAge").val();
            var uCustAddress = $("#txtUCustAddress").val();

            if (custId.test(uCustId) && custName.test(uCustName) && custAge.test(uCustAge) && custAddress.test(uCustAddress) && custSalary.test(uCustSalary)) {
                $("#btnUpdateCustomer").prop('disabled', false);
            }

        } else {
            $("#btnUpdateCustomer").prop('disabled', true);
            $("#txtUCustSalary").css('border', '2px solid red');
            $("#lblUCustSalary").text("Customer salary is a required field.");
        }
    });

    function updateCustomer() {
        let uCustId = $("#txtUCustId").val();
        let uCustName = $("#txtUCustName").val();
        let uCustAge = $("#txtUCustAge").val();
        let uCustAddress = $("#txtUCustAddress").val();
        let uCustSalary = $("#txtUCustSalary").val();

        for (var i = 0; i < customerDB.length; i++) {
            if (customerDB[i].getID() == uCustId) {
                customerDB[i].setID(uCustId);
                customerDB[i].setName(uCustName);
                customerDB[i].setAge(uCustAge);
                customerDB[i].setAddress(uCustAddress);
                customerDB[i].setSalary(uCustSalary);

                clearUpdateCustomerFields();
                $("#btnUpdateCustomer").prop('disabled', true);
            }
        }
    }

    function clearUpdateCustomerFields() {
        $("#txtUCustId").val("");
        $("#txtUCustName").val("");
        $("#txtUCustAge").val("");
        $("#txtUCustAddress").val("");
        $("#txtUCustSalary").val("");

        $("#txtUCustId").css('border', '1px solid #ced4da');
        $("#txtUCustName").css('border', '1px solid #ced4da');
        $("#txtUCustAge").css('border', '1px solid #ced4da');
        $("#txtUCustAddress").css('border', '1px solid #ced4da');
        $("#txtUCustSalary").css('border', '1px solid #ced4da');


        $("#btnUpdateCustomer").prop('disabled', true);
    }

    $("#btnUpdateCustomer").click(function () {
            let res = confirm("Do you want to update this customer?");
            if (res) {
                updateCustomer();
                loadAllCustomers();
            }
    });


    /*Item Validation----------------------------------------------*/
    const itemId = /^(I00-)[0-9]{3}$/;
    const itemName = /^[A-z ]{5,20}$/;
    const itemQty = /^[0-9]{1,}$/;
    const unitPrice = /[0-9]{1,}[.][0-9]{2}$/;

    /*Save Item------------------------------------------*/

    $('#txtItemId,#txtItemName,#txtQty,#txtUnitPrice').on('keydown', function (etOb) {
        if (etOb.key == "Tab") {
            etOb.preventDefault();
        }
    });

    $('#txtItemId,#txtItemName,#txtQty,#txtUnitPrice').on('blur', function () {
        formValids();
    });

    $("#txtItemId").on('keyup', function (etOb) {
        setBtn();
        if (etOb.key == "Enter") {
            checkIfValids();
        }
    });

    $("#txtItemName").on('keyup', function (etOb) {
        setBtn();
        if (etOb.key == "Enter") {
            checkIfValids();
        }
    });

    $("#txtQty").on('keyup', function (etOb) {
        setBtn();
        if (etOb.key == "Enter") {
            checkIfValids();
        }
    });

    $("#txtUnitPrice").on('keyup', function (etOb) {
        setBtn();
        if (etOb.key == "Enter") {
            checkIfValids();
        }
    });

    function formValids() {
        var iId = $("#txtItemId").val();
        $("#txtItemId").css('border', '2px solid green');
        $("#lblItemId").text("");
        if (itemId.test(iId)) {
            var iName = $("#txtItemName").val();
            if (itemName.test(iName)) {
                $("#txtItemName").css('border', '2px solid green');
                $("#lblItemName").text("");
                var iQty = $("#txtQty").val();
                if (itemQty.test(iQty)) {
                    $("#txtQty").css('border', '2px solid green');
                    $("#lblItemQty").text("");
                    var iUnitPrice = $("#txtUnitPrice").val();
                    if (unitPrice.test(iUnitPrice)) {
                        $("#txtUnitPrice").css('border', '2px solid green');
                        $("#lblItemUnitPrice").text("");
                        return true;
                    } else {
                        $("#txtUnitPrice").css('border', '2px solid red');
                        $("#lblItemUnitPrice").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                } else {
                    $("#txtQty").css('border', '2px solid red');
                    $("#lblItemQty").text("Cus Salary is a required field : Pattern 100.00 or 100");
                    return false;
                }
            } else {
                $("#txtItemName").css('border', '2px solid red');
                $("#lblItemName").text("Cus Salary is a required field : Pattern 100.00 or 100");
                return false;
            }
        } else {
            $("#txtItemId").css('border', '2px solid red');
            $("#lblItemId").text("Cus Salary is a required field : Pattern 100.00 or 100");
        }

    }

    function checkIfValids() {
        var iId = $("#txtItemId").val();
        if (itemId.test(iId)) {
            $("#txtItemName").focus();
            var iName = $("#txtItemName").val();
            if (itemName.test(iName)) {
                $("#txtQty").focus();
                var iQty = $("#txtQty").val();
                if (itemQty.test(iQty)) {
                    $("#txtUnitPrice").focus();
                    var iUnitPrice = $("#txtUnitPrice").val();
                    if (unitPrice.test(iUnitPrice)) {
                        let res = confirm("Do you really need to add this Item..?");
                        if (res) {
                            saveItem();
                            clearAll();
                        }
                    } else {
                        $("#txtUnitPrice").focus();
                    }
                } else {
                    $("#txtQty").focus();
                }
            } else {
                $("#txtItemName").focus();
            }
        } else {
            $("#txtItemId").focus();
        }
    }

    function setBtn() {
        let bt = formValids();
        if (bt) {
            $("#btnSaveItem").attr('disable', false);
        } else {
            $("#btnSaveItem").attr('disable', true);
        }
    }

    $('#btnSaveItem').click(function () {
        checkIfValids();
    });

    function saveItem() {
        let itemId = $("#txtItemId").val();
        let itemName = $("#txtItemName").val();
        let itemQty = $("#txtQty").val();
        let unitPrice = $("#txtUnitPrice").val();

        let itemDTO = new ItemDTO(itemId, itemName, itemQty, unitPrice);

        itemDB.push(itemDTO);
        loadAllItems();
        clearAllSaveItemFields();
    }

    function loadAllItems() {
        $("#itemTable").empty();
        for (var i of itemDB) {
            let row = `<tr><td>${i.getId()}</td><td>${i.getName()}</td><td>${i.getQty()}</td><td>${i.getUnitPrice()}</td></tr>`;
            $("#itemTable").append(row);
        }
    }

    function clearAllSaveItemFields(){
        $("#txtItemId").val("");
        $("#txtItemName").val("");
        $("#txtQty").val("");
        $("#txtUnitPrice").val("");

        $("#btnSaveItem").prop('disabled', true);
    }

    /*Update Item---------------------------------*/
    $("#txtUItemId,#txtUItemName,#txtUItemQty,#txtUItemUnitPrice").on('keydown' , function (e) {
        if(e.key == "Tab"){
            e.preventDefault();
        }
    });

    $("#txtUItemId").on('keyup', function (e) {
        let searchId = $("#txtUItemId").val();
        if(itemId.test(searchId)){
            $("#txtUItemId").css('border', '2px solid green');
            $("#lblUItemId").text("");
            if(e.key == "Enter"){
                let item = searchItem(searchId);
                if(item){
                    $("#txtUItemName").val(item.getName());
                    $("#txtUItemQty").val(item.getQty());
                    $("#txtUItemUnitPrice").val(item.getUnitPrice());
                    $("#btnUpdateItem").prop('disabled', false);

                    $("#txtUItemName").css('border', '2px solid green');
                    $("#txtUItemQty").css('border', '2px solid green');
                    $("#txtUItemUnitPrice").css('border', '2px solid green');
                    $("#txtUItemName").focus();
                }else {
                    $("#txtUItemName").val("");
                    $("#txtUItemQty").val("");
                    $("#txtUItemUnitPrice").val("");
                    $("#btnUpdateItem").prop('disabled', true);
                    $("#txtUItemName").css('border', '1px solid #ced4da');
                    $("#txtUItemQty").css('border', '1px solid #ced4da');
                    $("#txtUItemUnitPrice").css('border', '1px solid #ced4da');
                    alert("Item Not found");
                }
            }
        }else {
            $("#txtUItemId").css('border', '2px solid red');
            $("#lblUItemId").text("Item ID is a required field.Pattern : I00-0001");
            $("#btnUpdateItem").prop('disabled', true);
        }
    });

    function searchItem(itemId) {
        for (var i = 0; i < itemDB.length; i++) {
            if(itemDB[i].getId()==itemId){
                return itemDB[i];
            }
        }
    }

    $("#txtUItemName").keyup(function (event) {
        var uItName = $("#txtUItemName").val();
        if (itemName.test(uItName)) {
            $("#txtUItemName").css('border', '2px solid green');
            $("#lblUItemName").text("");
            if (event.key == "Enter") {
                $("#txtUItemQty").focus();
            }
            var uItId = $("#txtUItemId").val();
            var uItQty = $("#txtUItemQty").val();
            var uItUnitPrice = $("#txtUItemUnitPrice").val();

            if (itemId.test(uItId) && itemName.test(uItName) && itemQty.test(uItQty) && unitPrice.test(uItUnitPrice)) {
                $("#btnUpdateItem").prop('disabled', false);
            }

        } else {
            $("#btnUpdateItem").prop('disabled', true);
            $("#txtUItemName").css('border', '2px solid red');
            $("#lblUItemName").text("Item name is a required field.");
        }
    });

    $("#txtUItemQty").keyup(function (event) {
        var uItQty = $("#txtUItemQty").val();
        if (itemQty.test(uItQty)) {
            $("#txtUItemQty").css('border', '2px solid green');
            $("#lblUItemQty").text("");
            if (event.key == "Enter") {
                $("#txtUItemUnitPrice").focus();
            }
            var uItId = $("#txtUItemId").val();
            var uItName = $("#txtUItemName").val();
            var uItUnitPrice = $("#txtUItemUnitPrice").val();

            if (itemId.test(uItId) && itemName.test(uItName) && itemQty.test(uItQty) && unitPrice.test(uItUnitPrice)) {
                $("#btnUpdateItem").prop('disabled', false);
            }

        } else {
            $("#btnUpdateItem").prop('disabled', true);
            $("#txtUItemQty").css('border', '2px solid red');
            $("#lblUItemQty").text("Item Qty is a required field.");
        }
    });

    $("#txtUItemUnitPrice").keyup(function (event) {
        var uItUnitPrice = $("#txtUItemUnitPrice").val();
        if (unitPrice.test(uItUnitPrice)) {
            $("#txtUItemUnitPrice").css('border', '2px solid green');
            $("#lblUItemUnitPrice").text("");
            if (event.key == "Enter") {
                let res = confirm("Do you want to update this Item?");
                if (res) {
                    updateItem();
                    loadAllItems();
                }
            }
            var uItId = $("#txtUItemId").val();
            var uItName = $("#txtUItemName").val();
            var uItQty = $("#txtUItemQty").val();

            if (itemId.test(uItId) && itemName.test(uItName) && itemQty.test(uItQty) && unitPrice.test(uItUnitPrice)) {
                $("#btnUpdateItem").prop('disabled', false);
            }

        } else {
            $("#btnUpdateItem").prop('disabled', true);
            $("#txtUItemUnitPrice").css('border', '2px solid red');
            $("#lblUItemUnitPrice").text("Item Unit Price is a required field.");
        }
    });

    function updateItem() {
        let uItId = $("#txtUItemId").val();
        let uItName = $("#txtUItemName").val();
        let uItQty = $("#txtUItemQty").val();
        let uItUnitPrice = $("#txtUItemUnitPrice").val();

        for (i = 0; i<itemDB.length ; i++){
            if(itemDB[i].getId() == uItId){
                itemDB[i].setId(uItId);
                itemDB[i].setName(uItName);
                itemDB[i].setQty(uItQty);
                itemDB[i].setUnitPrice(uItUnitPrice);

                clearUpdateItemFields();
                $("#btnUpdateItem").prop('disabled', true);
            }
        }
    }

    function clearUpdateItemFields() {
        $("#txtUItemId").val("");
        $("#txtUItemName").val("");
        $("#txtUItemQty").val("");
        $("#txtUItemUnitPrice").val("");

        $("#txtUItemId").css('border', '1px solid #ced4da');
        $("#txtUItemName").css('border', '1px solid #ced4da');
        $("#txtUItemQty").css('border', '1px solid #ced4da');
        $("#txtUItemUnitPrice").css('border', '1px solid #ced4da');

        $("#btnUpdateItem").prop('disabled', true);
    }

    $("#btnUpdateItem").click(function () {
        let res = confirm("Do you want to update this Item?");
        if (res) {
            updateItem();
            loadAllItems();
        }
    });

</script>
</body>
</html>