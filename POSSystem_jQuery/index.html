<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSS_Frameworks-Bootstrap</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/styles/style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light shadow-lg" style="background-color: #1C66A6;">
        <div class="container-fluid rounded" >
            <a class="navbar-brand" href="#">Nihal Food City</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link active" id="home_page" aria-current="page" style="cursor: pointer">Home</a>
                    <a class="nav-link" id="customer_page" style="cursor: pointer" >Customer</a>
                    <a class="nav-link" id="item_page" style="cursor: pointer" >Items</a>
                    <a class="nav-link" id="place_order_page" style="cursor: pointer" >Orders</a>
                </div>
            </div>
        </div>
    </nav>
<main id="home">
    <section class="firstSection">
        <div class="image">
            <h1 class="name">Nihal Food City</h1>
        </div>
    </section>
</main>

<!--Customer Section-->
    <section class="secondSection" id="customer" style="display: none">
        <h1 class="sectionName">Customer</h1>
        <div class="container-fluid">
            <div class="row d-flex flex-row justify-content-around">
                <div class="col-10 col-md-5 col-lg-5 ">
                    <label class="form-label" for="customerDataLists">Customer ID</label>
                    <input class="form-control" id="customerDataLists" list="datalistOptions"
                           placeholder="Type to search...">
                    <datalist id="datalistOptions">
                        <option value="C001">
                        <option value="C002">
                        <option value="C003">
                        <option value="C004">
                        <option value="C005">
                    </datalist>
                </div>
                <div class="col-10 col-md-5 col-lg-5 ">
                    <button class="btn btn-primary" data-bs-target="#addNewCustomer" data-bs-toggle="modal" type="button">
                        Add New Customer
                    </button>
                    <button class="btn btn-primary" data-bs-target="#updateCustomer" data-bs-toggle="modal" type="button">
                        Update Customer
                    </button>
                    <button class="btn btn-primary" data-bs-target="#deleteCustomer" data-bs-toggle="modal" type="button">
                        Delete Customer
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div aria-hidden="true" aria-labelledby="addNewCustomerLabel" class="modal fade" id="addNewCustomer" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addNewCustomerLabel">Add New Customer</h5>
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label class="form-label" for="txtCustomerId">Customer ID</label>
                                <input class="form-control is-valid" id="txtCustomerId" required type="text">
                                <p><small class="text-danger pl-1" id="lblcustId"></small></p>
                                <!--<div class="valid-feedback">
                                    Looks good!
                                </div>-->
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label class="form-label" for="txtCustomerName">Customer Name</label>
                                <input class="form-control is-valid" id="txtCustomerName" required type="text">
                                <p><small class="text-danger pl-1" id="lblcustName"></small></p>
                                <!--<div class="valid-feedback">
                                    Looks good!
                                </div>-->
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label class="form-label" for="txtCustomerAge">Age</label>
                                <input class="form-control is-valid" id="txtCustomerAge" required type="text">
                                <p><small class="text-danger pl-1" id="lblcustAge"></small></p>
                                <!--<div class="valid-feedback">
                                    Looks good!
                                </div>-->
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label class="form-label" for="txtAddress">Address</label>
                                <input class="form-control is-valid" id="txtAddress" required type="text">
                                <p><small class="text-danger pl-1" id="lblcustAddress"></small></p>
                                <!--<div class="valid-feedback">
                                    Looks good!
                                </div>-->
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label class="form-label" for="txtSalary">Salary(Rs.)</label>
                                <input class="form-control is-valid" id="txtSalary" required type="text">
                                <p><small class="text-danger pl-1" id="lblcustSalary"></small></p>
                                <!--<div class="valid-feedback">
                                    Looks good!
                                </div>-->
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                        <button class="btn btn-primary" id="btnSaveCustomer" type="button">Save Customer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div aria-hidden="true" aria-labelledby="updateCustomerLabel" class="modal fade" id="updateCustomer" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="updateCustomerLabel">Update Customer</h5>
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modal-body">
                        <form class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label" for="txtCusId">Customer ID</label>
                                <input class="form-control is-valid" id="txtCusId" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCusName">Customer Name</label>
                                <input class="form-control is-valid" id="txtCusName" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCusAge">Age</label>
                                <input class="form-control is-valid" id="txtCusAge" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCusAddress">Address</label>
                                <input class="form-control is-valid" id="txtCusAddress" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label" for="txtCusSalary">Salary(Rs.)</label>
                                <input class="form-control is-valid" id="txtCusSalary" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                        <button class="btn btn-primary" type="button">Update Customer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div aria-hidden="true" aria-labelledby="deleteCustomerLabel" class="modal fade" id="deleteCustomer" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteCustomerLabel">Add New Customer</h5>
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modal-body">
                        <form class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label" for="txtCustId">Customer ID</label>
                                <input class="form-control is-valid" id="txtCustId" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCustName">Customer Name</label>
                                <input class="form-control is-valid" id="txtCustName" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCustAge">Age</label>
                                <input class="form-control is-valid" id="txtCustAge" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="txtCustAddress">Address</label>
                                <input class="form-control is-valid" id="txtCustAddress" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label" for="txtCustSalary">Salary(Rs.)</label>
                                <input class="form-control is-valid" id="txtCustSalary" required type="text">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                        <button class="btn btn-primary" type="button">Delete Customer</button>
                    </div>
                </div>
            </div>
        </div>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">Customer Id</th>
                <th scope="col">Name</th>
                <th scope="col">Age</th>
                <th scope="col">Address</th>
                <th scope="col">Salary</th>
            </tr>
            </thead>
            <tbody id="customerTable">
            </tbody>
        </table>
    </section>

<!--Item Section-->
    <section class="thirdSection" id="item" style="display: none">
        <h1 class="sectionName">Item</h1>
        <div class="container-fluid">
            <div class="row d-flex flex-row justify-content-around">
                <div class="col-10 col-md-5 col-lg-5 ">
                    <label for="customerDataLists" class="form-label">Customer ID</label>
                    <input class="form-control" list="datalistOptions" id="itemDataLists" placeholder="Type to search...">
                    <datalist id="datalistOption">
                        <option value="I001">
                        <option value="I002">
                        <option value="I003">
                        <option value="I004">
                        <option value="I005">
                    </datalist>
                </div>
                <div class="col-10 col-md-5 col-lg-5 ">
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addNewItem">
                        Add New Item
                    </button>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateItem">
                        Update Item
                    </button>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deleteItem">
                        Delete Item
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="addNewItem" tabindex="-1" aria-labelledby="addNewItemLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addNewItemLabel">Add New Item</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label for="txtItemId" class="form-label">Item ID</label>
                                <input type="text" class="form-control is-valid" id="txtItemId" required type="text">
                                <p><small class="text-danger pl-1" id="lblItemId"></small></p>
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label for="txtItemName" class="form-label">Item Name</label>
                                <input type="text" class="form-control is-valid" id="txtItemName" required type="text">
                                <p><small class="text-danger pl-1" id="lblItemName"></small></p>
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label for="txtQty" class="form-label">Qty</label>
                                <input type="text" class="form-control is-valid" id="txtQty" required type="text">
                                <p><small class="text-danger pl-1" id="lblItemQty"></small></p>
                            </div>
                            <div class="col-md-6 col-lg-6 col-12">
                                <label for="txtUnitPrice" class="form-label">Unit Price(Rs.)</label>
                                <input type="text" class="form-control is-valid" id="txtUnitPrice" required type="text">
                                <p><small class="text-danger pl-1" id="lblItemUnitPrice"></small></p>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="btnSaveItem">Save Item</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Button trigger modal -->

        <!-- Modal -->
        <div class="modal fade" id="updateItem" tabindex="-1" aria-labelledby="updateItemLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="updateItemLabel">Update Item</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form class="row g-3">
                            <div class="col-md-6">
                                <label for="validationServer05" class="form-label">Item ID</label>
                                <input type="text" class="form-control is-valid" id="validationServer05" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer06" class="form-label">Item Name</label>
                                <input type="text" class="form-control is-valid" id="validationServer06" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer07" class="form-label">Qty</label>
                                <input type="text" class="form-control is-valid" id="validationServer07" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer08" class="form-label">Unit Price(Rs.)</label>
                                <input type="text" class="form-control is-valid" id="validationServer08" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save Item</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Button trigger modal -->

        <!-- Modal -->
        <div class="modal fade" id="deleteItem" tabindex="-1" aria-labelledby="deleteItemLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteItemLabel">Delete Item</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form class="row g-3">
                            <div class="col-md-6">
                                <label for="validationServer09" class="form-label">Item ID</label>
                                <input type="text" class="form-control is-valid" id="validationServer09" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer10" class="form-label">Item Name</label>
                                <input type="text" class="form-control is-valid" id="validationServer10" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer11" class="form-label">Qty</label>
                                <input type="text" class="form-control is-valid" id="validationServer11" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationServer12" class="form-label">Unit Price(Rs.)</label>
                                <input type="text" class="form-control is-valid" id="validationServer12" value="" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Delete Item</button>
                    </div>
                </div>
            </div>
        </div>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">Item ID</th>
                <th scope="col">Item Name</th>
                <th scope="col">Qty</th>
                <th scope="col">Unit Price(Rs.)</th>
            </tr>
            </thead>
            <tbody id="itemTable">
            </tbody>
        </table>
    </section>

<!--Place Order Section-->
    <section class="fourthSection" id="place_order" style="display: none">
        <h1 class="sectionName">Place Order</h1>
        <form class="row g-3">
            <div class="col-md-2">
                <label for="validationDefault04" class="form-label">Customer ID</label>
                <select class="form-select" id="validationDefault01" required>
                    <option selected disabled value="">Choose...</option>
                    <option>...</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="validationDefault02" class="form-label">Name</label>
                <input type="text" class="form-control" id="validationDefault02" value="Otto" required>
            </div>
            <div class="col-md-4">
                <label for="validationDefault02" class="form-label">Address</label>
                <input type="text" class="form-control" id="validationDefault03" value="Otto" required>
            </div>
            <div class="col-md-2">
                <label for="validationDefault02" class="form-label">Contact</label>
                <input type="text" class="form-control" id="validationDefault06" value="Otto" required>
            </div>
            <div class="col-md-3">
                <label for="validationDefault04" class="form-label">Item ID</label>
                <select class="form-select" id="validationDefault07" required>
                    <option selected disabled value="">Choose...</option>
                    <option>...</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="validationDefault03" class="form-label">Name</label>
                <input type="text" class="form-control" id="validationDefault04" required>
            </div>
            <div class="col-md-3 col-12 col-lg-6">
                <label for="validationDefault03" class="form-label">Qty</label>
                <input type="text" class="form-control" id="validationDefault08" required>
            </div>
            <div class="col-md-3">
                <label for="validationDefault05" class="form-label">Price(Rs.)</label>
                <input type="text" class="form-control" id="validationDefault05" required>
            </div>
            <div class="col-12">
                <button class="btn btn-primary" type="submit">Place Order</button>
            </div>
        </form>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">Customer ID</th>
                <th scope="col">Name</th>
                <th scope="col">Address</th>
                <th scope="col">Contact</th>
                <th scope="col">Item ID</th>
                <th scope="col">Item Name</th>
                <th scope="col">Qty</th>
                <th scope="col">Total</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th scope="row">C001</th>
                <td>Kamal</td>
                <td>Galle</td>
                <td>077-3783823</td>
                <td>I001</td>
                <td>Sudu Samba</td>
                <td>5</td>
                <td>3000</td>
            </tr>
            <tr>
                <th scope="row">C002</th>
                <td>Nimal</td>
                <td>Galle</td>
                <td>077-5683823</td>
                <td>I002</td>
                <td>Nadu</td>
                <td>5</td>
                <td>5000</td>
            </tr>
            </tbody>
        </table>
    </section>

    <script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.bundle.js"></script>
    <script src="db/db.js"></script>
    <script>
        $("#home_page").click(function(){
            $("#home").css('display','block');
            $("#customer").css('display','none');
            $("#item").css('display','none');
            $("#place_order").css('display','none');
        });
        $("#customer_page").click(function(){
            $("#home").css('display','none');
            $("#customer").css('display','block');
            $("#item").css('display','none');
            $("#place_order").css('display','none');
        });
        $("#item_page").click(function(){
            $("#home").css('display','none');
            $("#customer").css('display','none');
            $("#item").css('display','block');
            $("#place_order").css('display','none');
        });
        $("#place_order_page").click(function(){
            $("#home").css('display','none');
            $("#customer").css('display','none');
            $("#item").css('display','none');
            $("#place_order").css('display','block');
        });

/*Customer Save-----------------------------------------*/
        $("#btnSaveCustomer").click(function () {
            let custId = $("#txtCustomerId").val();
            let custName = $("#txtCustomerName").val();
            let custAge = $("#txtCustomerAge").val();
            let custAddress = $("#txtAddress").val();
            let custSalary = $("#txtSalary").val();

            let tableRow = `<tr><td>${custId}</td><td>${custName}</td><td>${custAge}</td><td>${custAddress}</td><td>${custSalary}</td></tr>`;

            $("#customerTable").append(tableRow);

            $("#txtCustomerId").val("");
            $("#txtCustomerName").val("");
            $("#txtCustomerAge").val("");
            $("#txtAddress").val("");
            $("#txtSalary").val("");

        });

        /*Item Save-----------------------------------------*/
        $("#btnSaveItem").click(function () {
            let itemId = $("#txtItemId").val();
            let itemName = $("#txtItemName").val();
            let itemQty = $("#txtQty").val();
            let itemUnitPrice = $("#txtUnitPrice").val();

            console.log(itemId,itemName,itemQty,itemUnitPrice);

            let tableRow = `<tr><td>${itemId}</td><td>${itemName}</td><td>${itemQty}</td><td>${itemUnitPrice}</td></tr>>`;

            $("#itemTable").append(tableRow);

            $("#txtItemId").val("");
            $("#txtItemName").val("");
            $("#txtQty").val("");
            $("#txtUnitPrice").val("");
        });

        /*Validation...................................*/

        /*Customer validation-----------------------------*/
        const custId = /^(C00-)[0-9]{1,3}$/;
        const custName = /^[A-z ]{5,20}$/;
        const custAge = /^[0-9]$/;
        const custAddress = /^[0-9/A-z. ,]{7,}$/;
        const custSalary = /^[0-9][.][0-9]{2}$/;

        $('#txtCustomerId,#txtCustomerName,#txtCustomerAge,#txtAddress,#txtSalary').on('keydown', function (eventOb) {
            if(eventOb.key == "Tab"){
                eventOb.preventDefault();
            }
        });

        $('#txtCustomerId,#txtCustomerName,#txtCustomerAge,#txtAddress,#txtSalary').on('blur', function () {
            formValid();
        });

        $("txtCustomerId").on('keyup' , function (eventOb) {
            setButton();
            if(eventOb.key == "Enter"){
               checkIfValid();
            }
            if(eventOb.key == "Control"){
                var typedCustomerId = $("#txtCustomerId").val();
                var srcCustomer = searchCustomerFormId(typedCustomerId);
                $("#txtCustomerId").val(srcCustomer.getID());
                $("#txtCustomerName").val(srcCustomer.getName());
                $("#txtCustomerAge").val(srcCustomer.getAge());
                $("#txtAddress").val(srcCustomer.getAddress());
                $("#txtSalary").val(srcCustomer.getSalary());
            }
        });

        $("#txtCustomerName").on('keyup' , function (eventOb) {
            setButton();
            if (eventOb.key == "Enter") {
                checkIfValid();
            }
        });

        $("#txtCustomerAge").on('keyup' , function (eventOb) {
            setButton();
            if (eventOb.key == "Enter") {
                checkIfValid();
            }
        });

        $("#txtAddress").on('keyup' , function (eventOb) {
            setButton();
            if (eventOb.key == "Enter") {
                checkIfValid();
            }
        });

        $("#txtSalary").on('keyup' , function (e) {
            setButton();
            if (e.key == "Enter") {
                checkIfValid();
            }
        });

        function formValid() {
            var cusId = $("#txtCustomerId").val();
            $("#txtCustomerId").css('border','2px solid green');
            $("#lblcustId").text("");
            if(custId.test(cusId)){
                var cusName = $("#txtCustomerName").val();
                if(custName.test(cusName)){
                    $("#txtCustomerName").css('border','2px solid green');
                    $("#lblcustName").text("");
                    var cusAge = $("#txtCustomerAge").val();
                    if(custAge.test(cusAge)){
                        $("#txtCustomerAge").css('border','2px solid green');
                        $("#lblcustAge").text("");
                        var cusAddress = $("#txtAddress").val();
                        if(custAddress.test(cusAddress)){
                            $("txtAddress").css('border','2px solid green');
                            $("#lblcustAddress").text("");
                            var cusSalary = $("#txtSalary").val();
                            if(custSalary.test(cusSalary)){
                                $("#txtSalary").css('border','2px solid green');
                                $("#lblcustSalary").text("");
                                return true;
                            }else {
                                $("#txtSalary").css('border', '2px solid red');
                                $("#lblcustSalary").text("Cus Salary is a required field : Pattern 100.00 or 100");
                                return false;
                            }
                        }else {
                            $("#txtAddress").css('border', '2px solid red');
                            $("#lblcustAddress").text("Cus Salary is a required field : Pattern 100.00 or 100");
                            return false;
                        }
                    }else {
                        $("#txtCustomerAge").css('border', '2px solid red');
                        $("#lblcustAge").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                }else {
                    $("#txtCustomerName").css('border', '2px solid red');
                    $("#lblcustName").text("Cus Salary is a required field : Pattern 100.00 or 100");
                    return false;
                }
            }else {
                $("#txtCustomerId").css('border', '2px solid red');
                $("#lblcustId").text("Cus Salary is a required field : Pattern 100.00 or 100");
            }

        }

        function checkIfValid() {
            var cusId = $("#txtCustomerId").val();
            if(custId.test(cusId)){
                $("#txtCustomerId").focus();
                var cusName = $("#txtCustomerName").val();
                if(custName.test(cusName)){
                    $("#txtCustomerAge").focus();
                    var cusAge = $("#txtCustomerAge").val();
                    if(custAge.test(cusAge)){
                        $("#txtAddress").focus();
                        var cusAddress = $("#txtAddress").val();
                        if(custAddress.test(cusAddress)){
                            $("#txtSalary").focus();
                            var cusSalary = $("#txtSalary").val();
                            if(custSalary.test(cusSalary)){
                                let res = confirm("Do you really need to add this Customer..?");
                                if(res){
                                    saveCustomer();
                                    clearAll();
                                }
                            }else {
                                $("#txtSalary").focus();
                            }
                        }else {
                            $("#txtAddress").focus();
                        }
                    }else {
                        $("#txtCustomerAge").focus();
                    }
                }else {
                    $("#txtCustomerName").focus();
                }
            }else {
                $("#txtCustomerId").focus();
            }
        }
        
        function setButton() {
            let bt = formValid();
            if(bt){
                $("#btnSaveCustomer").attr('disable',false);
            }else {
                $("#btnSaveCustomer").attr('disable',true);
            }
        }

        $('#btnSaveCustomer').click(function () {
            checkIfValid();
        });

        function saveCustomer() {

            $("#customerTable>tr").off("click");

            let customerID = $("#txtCustomerId").val();
            let customerName = $("#txtCustomerName").val();
            let customerAge = $("#txtCustomerAge").val();
            let customerAddress = $("#txtAddress").val();
            let customerSalary= $("#txtSalary").val();

            let customerDTO = new CustomerDTO(customerID, customerName, customerAge, customerAddress, customerSalary);

            customerDB.push(customerDTO);
            loadAllCustomers();
        }
        function loadAllCustomers() {
            $("#customerTable").empty();
            for (var c of customerDB) {
                let row = `<tr><td>${c.getID()}</td><td>${c.getName()}</td><td>${c.getAge()}</td><td>${c.getAddress()}</td><td>${c.getSalary()}</td></tr>`;
                $("#customerTable").append(row);
            }
        }

        const itemId = /^(I00-)[0-9]{1,3}$/;
        const itemName = /^[A-z ]{5,20}$/;
        const itemQty = /^[0-9]$/;
        const unitPrice = /^[0-9][.][0-9]{2}$/;

        $('#txtItemId,#txtItemName,#txtQty,#txtUnitPrice').on('keydown', function (etOb) {
            if(etOb.key == "Tab"){
                etOb.preventDefault();
            }
        });

        $('#txtItemId,#txtItemName,#txtQty,#txtUnitPrice').on('blur', function () {
            formValids();
        });

        $("txtItemId").on('keyup' , function (etOb) {
            setBtn();
            if(etOb.key == "Enter"){
                checkIfValids();
            }
            if(etOb.key == "Control"){
                var typedItemId = $("#txtItemId").val();
                var srcItem = searchItemFormId(typedItemId);
                $("#txtItemId").val(srcItem.getID());
                $("#txtItemName").val(srcItem.getName());
                $("#txtQty").val(srcItem.getQty());
                $("#txtUnitPrice").val(srcItem.getUnitPrice());
            }
        });

        $("#txtItemName").on('keyup' , function (etOb) {
            setBtn();
            if (etOb.key == "Enter") {
                checkIfValids();
            }
        });

        $("#txtQty").on('keyup' , function (etOb) {
            setBtn();
            if (etOb.key == "Enter") {
                checkIfValids();
            }
        });

        $("#txtUnitPrice").on('keyup' , function (etOb) {
            setBtn();
            if (etOb.key == "Enter") {
                checkIfValids();
            }
        });

        function formValids() {
            var iId = $("#txtItemId").val();
            $("#txtItemId").css('border','2px solid green');
            $("#lblItemId").text("");
            if(itemId.test(iId)){
                var iName = $("#txtItemName").val();
                if(itemName.test(iName)){
                    $("#txtItemName").css('border','2px solid green');
                    $("#lblItemName").text("");
                    var iQty = $("#txtQty").val();
                    if(itemQty.test(iQty)){
                        $("#txtQty").css('border','2px solid green');
                        $("#lblItemQty").text("");
                        var iUnitPrice = $("#txtUnitPrice").val();
                        if(unitPrice.test(iUnitPrice)){
                            $("txtUnitPrice").css('border','2px solid green');
                            $("#lblItemUnitPrice").text("");
                                return true;
                        }else {
                            $("#txtUnitPrice").css('border', '2px solid red');
                            $("#lblItemUnitPrice").text("Cus Salary is a required field : Pattern 100.00 or 100");
                            return false;
                        }
                    }else {
                        $("#txtQty").css('border', '2px solid red');
                        $("#lblItemQty").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                }else {
                    $("#txtItemName").css('border', '2px solid red');
                    $("#lblItemName").text("Cus Salary is a required field : Pattern 100.00 or 100");
                    return false;
                }
            }else {
                $("#txtItemId").css('border', '2px solid red');
                $("#lblItemId").text("Cus Salary is a required field : Pattern 100.00 or 100");
            }

        }

        function checkIfValids() {
            var iId = $("#txtItemId").val();
            if(itemId.test(iId)){
                $("#txtItemName").focus();
                var iName = $("#txtItemName").val();
                if(itemName.test(iName)){
                    $("#txtQty").focus();
                    var iQty = $("#txtQty").val();
                    if(itemQty.test(iQty)){
                        $("#txtUnitPrice").focus();
                        var iUnitPrice = $("#txtUnitPrice").val();
                        if(unitPrice.test(iUnitPrice)){
                                let res = confirm("Do you really need to add this Customer..?");
                                if(res){
                                    saveItem();
                                    clearAll();
                                }
                        }else {
                            $("#txtUnitPrice").focus();
                        }
                    }else {
                        $("#txtQty").focus();
                    }
                }else {
                    $("#txtItemName").focus();
                }
            }else {
                $("#txtItemId").focus();
            }
        }

        function setBtn() {
            let bt = formValids();
            if(bt){
                $("#btnSaveItem").attr('disable',false);
            }else {
                $("#btnSaveItem").attr('disable',true);
            }
        }

        $('#btnSaveItem').click(function () {
            checkIfValids();
        });

        function saveItem() {

            $("#itemTable>tr").off("click");

            let itemId = $("#txtItemId").val();
            let itemName = $("#txtItemName").val();
            let itemQty = $("#txtQty").val();
            let unitPrice = $("#txtUnitPrice").val();

            let itemDTO = new itemDTO(itemId,itemName,itemQty,unitPrice);

            itemDB.push(itemDTO);
            loadAllItems();
        }
        function loadAllItems() {
            $("#itemTable").empty();
            for (var i of itemDB) {
                let row = `<tr><td>${i.getID()}</td><td>${i.getName()}</td><td>${i.getQty()}</td><td>${i.getUnitPrice()}</td></tr>`;
                $("#itemTable").append(row);
            }
        }

    </script>
</body>
</html>